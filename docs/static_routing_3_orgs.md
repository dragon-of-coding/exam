# 3 организации: DHCP + DNS + статическая маршрутизация  
Продвинутый экзаменационный вариант

Задание:

> Построить сеть из трёх организаций.  
> В каждой организации: 1 DNS + DHCP сервер, 3 ПК и 1 коммутатор.  
> Маршрутизаторы связаны последовательно (R1–R2–R3).  
> Все ПК должны открывать сайты всех трёх организаций.

---

# 1. Схема подключения

Орг1 — R1 — R2 — R3 — Орг3
|
Орг2


Каждая организация содержит:

- Router Gi0/0 → Switch → Server + 3 PC

Связи между роутерами:

- R1 ↔ R2 через S0/0/0
- R2 ↔ R3 через S0/0/1

---

# 2. Адресный план

## Локальные сети организаций

### Организация 1
- Сеть: `192.168.1.0/24`
- R1 G0/0 = `192.168.1.1`
- Server1 = `192.168.1.10`

### Организация 2
- Сеть: `192.168.2.0/24`
- R2 G0/0 = `192.168.2.1`
- Server2 = `192.168.2.10`

### Организация 3
- Сеть: `192.168.3.0/24`
- R3 G0/0 = `192.168.3.1`
- Server3 = `192.168.3.10`

---

## Межроутерные сети (/30 — идеальный вариант)

### Между R1–R2
- Сеть: `10.0.12.0/30`
- R1 S0/0/0 = `10.0.12.1`
- R2 S0/0/0 = `10.0.12.2`

### Между R2–R3
- Сеть: `10.0.23.0/30`
- R2 S0/0/1 = `10.0.23.1`
- R3 S0/0/0 = `10.0.23.2`

---

# 3. Настройка интерфейсов роутеров

## R1

```text
enable
conf t

interface g0/0
 ip address 192.168.1.1 255.255.255.0
 no shutdown
exit

interface s0/0/0
 ip address 10.0.12.1 255.255.255.252
 clock rate 64000
 no shutdown
exit

## R2
```text
enable
conf t

interface g0/0
 ip address 192.168.2.1 255.255.255.0
 no shutdown
exit

interface s0/0/0
 ip address 10.0.12.2 255.255.255.252
 no shutdown
exit

interface s0/0/1
 ip address 10.0.23.1 255.255.255.252
 clock rate 64000
 no shutdown
exit

## R3
```text
enable
conf t

interface g0/0
 ip address 192.168.3.1 255.255.255.0
 no shutdown
exit

interface s0/0/0
 ip address 10.0.23.2 255.255.255.252
 no shutdown
exit

4. Настройка серверов (DHCP + DNS + HTTP)

Каждый сервер настраивается одинаково, только меняются адреса.

Ниже пример для Организации 1 (Org1).
Org2 и Org3 делаются аналогично.

Сервер Org1 (Server1)
4.1. IP (Desktop → IP Configuration)

IP: 192.168.1.10

Mask: 255.255.255.0

Gateway: 192.168.1.1

DNS: 192.168.1.10

Server2 (Организация 2)

Desktop → IP Configuration:

IP Address: 192.168.2.10

Subnet Mask: 255.255.255.0

Default Gateway: 192.168.2.1

DNS Server: 192.168.2.10

Server3 (Организация 3)

Desktop → IP Configuration:

IP Address: 192.168.3.10

Subnet Mask: 255.255.255.0

Default Gateway: 192.168.3.1

DNS Server: 192.168.3.10

4.2. DHCP (Services → DHCP)
DHCP: On
Pool Name: ORG1
Default Gateway: 192.168.1.1
DNS Server: 192.168.1.10
Start IP Address: 192.168.1.100
Subnet Mask: 255.255.255.0
Maximum Number of Users: 50


Кнопка Add.

4.3. DNS (Services → DNS)
Добавить 3 записи:

Name: www.org1.local   Address: 192.168.1.10
Name: www.org2.local   Address: 192.168.2.10
Name: www.org3.local   Address: 192.168.3.10

4.4. HTTP (Services → HTTP)

Включить HTTP → изменить index.html:

<html>
  <body>
    <h1>Сайт организации 1</h1>
    <p>ФИО: Ваша Фамилия Имя Отчество</p>
    <p>Номер билета: XX</p>
  </body>
</html>


Сохранить (Save).

То же самое сделать на Server2 и Server3
(но текст внутри другой, чтобы различать сайты).

5. Настройка ПК

На всех ПК:

Desktop → IP Configuration → DHCP

ПК должны получить:

IP в диапазоне 192.168.X.100+

Маску /24

Gateway = 192.168.X.1

DNS = адрес локального сервера (192.168.X.10)


6. Статическая маршрутизация

Маршруты прописываются на всех трёх роутерах.

R1

(нужно добраться до сетей Org2 и Org3 через R2)

ip route 192.168.2.0 255.255.255.0 10.0.12.2
ip route 192.168.3.0 255.255.255.0 10.0.12.2

R2

(между R1 и R3)

ip route 192.168.1.0 255.255.255.0 10.0.12.1
ip route 192.168.3.0 255.255.255.0 10.0.23.2

R3

(нужно добраться до сетей Org1 и Org2 через R2)

ip route 192.168.1.0 255.255.255.0 10.0.23.1
ip route 192.168.2.0 255.255.255.0 10.0.23.1

7. Проверка
7.1. Пинг

С любого ПК любой организации:

ping 192.168.1.10
ping 192.168.2.10
ping 192.168.3.10


Все должны отвечать.

7.2. Открытие сайтов

Desktop → Web Browser:

Открыть на любом ПК:

www.org1.local
www.org2.local
www.org3.local


Должны открываться все три сайта.
